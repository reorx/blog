var InstantClick=function(a,b){function q(a){var b=a.indexOf("#");return 0>b?a:a.substr(0,b)}function t(a){for(;a&&"A"!=a.nodeName;)a=a.parentNode;return a}function w(a){var c=b.protocol+"//"+b.host;if(!(c=a.target||a.hasAttribute("download")||0!=a.href.indexOf(c+"/")||-1<a.href.indexOf("#")&&q(a.href)==k)){if(J){a:{do{if(!a.hasAttribute)break;if(a.hasAttribute("data-no-instant"))break;if(a.hasAttribute("data-instant")){a=!0;break a}}while(a=a.parentNode)a=!1}a=!a}else a:{do{if(!a.hasAttribute)break;if(a.hasAttribute("data-instant"))break;if(a.hasAttribute("data-no-instant")){a=!0;break a}}while(a=a.parentNode)a=!1}c=a}return!c}function l(c,f,d,e){for(var g=!1,b=0,a;b<s[c].length;b++)"receive"==c?(a=s[c][b](f,d,e),a&&("body"in a&&(d=a.body),"title"in a&&(e=a.title),g=a)):s[c][b](f,d,e);return g}function B(c,b,d,e){if(a.documentElement.replaceChild(b,a.body),d){if(history.pushState(null,null,d),b=d.indexOf("#"),b=-1<b&&a.getElementById(d.substr(b+1)),e=0,b)for(;b.offsetParent;)e+=b.offsetTop,b=b.offsetParent;scrollTo(0,e),k=q(d)}else scrollTo(0,e);a.title=K&&a.title==c?c+String.fromCharCode(160):c,F(),r.done(),l("change",!1),c=a.createEvent("HTMLEvents"),c.initEvent("instantclick:newpage",!0,!0),dispatchEvent(c)}function G(a){y>+new Date-500||(a=t(a.target))&&w(a)&&o(a.href)}function C(a){y>+new Date-500||(a=t(a.target))&&w(a)&&(a.addEventListener("mouseout",M),z?(H=a.href,h=setTimeout(o,z)):o(a.href))}function O(a){y=+new Date,(a=t(a.target))&&w(a)&&(v?a.removeEventListener("mousedown",G):a.removeEventListener("mouseover",C),o(a.href))}function N(a){var b=t(a.target);!b||!w(b)||1<a.which||a.metaKey||a.ctrlKey||(a.preventDefault(),E(b.href))}function M(){h?(clearTimeout(h),h=!1):n&&!c&&(g.abort(),c=n=!1)}function L(){var h,b,i,j,k;if(!(4>g.readyState)&&0!=g.status){if(e.ready=+new Date-e.start,g.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){h=a.implementation.createHTMLDocument(""),h.documentElement.innerHTML=g.responseText.replace(/<noscript[\s\S]+<\/noscript>/gi,""),p=h.title,m=h.body,b=l("receive",f,m,p),b&&("body"in b&&(m=b.body),"title"in b&&(p=b.title)),b=q(f),d[b]={body:m,title:p,scrollY:b in d?d[b].scrollY:0};for(h=h.head.children,b=0,i,j=h.length-1;0<=j;j--)if(i=h[j],i.hasAttribute("data-instant-track")){i=i.getAttribute("href")||i.getAttribute("src")||i.innerHTML;for(k=x.length-1;0<=k;k--)x[k]==i&&b++}b!=x.length&&(u=!0)}else u=!0;c&&(c=!1,E(f))}}function F(c){if(a.body.addEventListener("touchstart",O,!0),v?a.body.addEventListener("mousedown",G,!0):a.body.addEventListener("mouseover",C,!0),a.body.addEventListener("click",N,!0),!c){c=a.body.getElementsByTagName("script");var b,d,e,f;i=0;for(j=c.length;i<j;i++)b=c[i],b.hasAttribute("data-no-instant")||(d=a.createElement("script"),b.src&&(d.src=b.src),b.innerHTML&&(d.innerHTML=b.innerHTML),e=b.parentNode,f=b.nextSibling,e.removeChild(b),e.insertBefore(d,f))}}function o(a){!v&&"display"in e&&100>+new Date-(e.start+e.display)||(h&&(clearTimeout(h),h=!1),a||(a=H),n&&(a==f||c))||(n=!0,c=!1,f=a,u=m=!1,e={start:+new Date},l("fetch"),g.open("GET",a),g.send())}function E(a){"display"in e||(e.display=+new Date-e.start),h||!n?h&&f&&f!=a?b.href=a:(o(a),r.start(0,!0),l("wait"),c=!0):c?b.href=a:u?b.href=f:m?(d[k].scrollY=pageYOffset,c=n=!1,B(p,m,f)):(r.start(0,!0),l("wait"),c=!0)}var A=navigator.userAgent,K=-1<A.indexOf(" CriOS/"),D="createTouch"in a,k,H,h,y,d={},g,f=!1,p=!1,u=!1,m=!1,e={},n=!1,c=!1,x=[],J,v,z,s={fetch:[],receive:[],wait:[],change:[]},r=function(){function i(c,e){d=c,a.getElementById(b.id)&&a.body.removeChild(b),b.style.opacity="1",a.getElementById(b.id)&&a.body.removeChild(b),g(),e&&setTimeout(l,0),clearTimeout(f),f=setTimeout(j,500)}function l(){d=10,g()}function j(){d+=1+2*Math.random(),98<=d?d=98:f=setTimeout(j,500),g()}function g(){c.style[e]="translate("+d+"%)",a.getElementById(b.id)||a.body.appendChild(b)}function k(){a.getElementById(b.id)?(clearTimeout(f),d=100,g(),b.style.opacity="0"):(i(100==d?0:d),setTimeout(k,0))}function h(){b.style.left=pageXOffset+"px",b.style.width=innerWidth+"px",b.style.top=pageYOffset+"px";var a="orientation"in window&&90==Math.abs(orientation);b.style[e]="scaleY("+innerWidth/screen[a?"height":"width"]*2+")"}var b,c,e,d,f;return{init:function(){var f,d,g;if(b=a.createElement("div"),b.id="instantclick",c=a.createElement("div"),c.id="instantclick-bar",c.className="instantclick-bar",b.appendChild(c),f=["Webkit","Moz","O"],e="transform",!(e in c.style))for(d=0;3>d;d++)f[d]+"Transform"in c.style&&(e=f[d]+"Transform");if(g="transition",!(g in c.style))for(d=0;3>d;d++)f[d]+"Transition"in c.style&&(g="-"+f[d].toLowerCase()+"-"+g);f=a.createElement("style"),f.innerHTML="#instantclick{position:"+(D?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+g+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+g+":all .25s}",a.head.appendChild(f),D&&(h(),addEventListener("resize",h),addEventListener("scroll",h))},start:i,done:k}}(),I="pushState"in history&&(!A.match("Android")||A.match("Chrome/"))&&"file:"!=b.protocol;return{supported:I,init:function(){var c,e,f;if(!k)if(I){for(c=arguments.length-1;0<=c;c--)e=arguments[c],!0===e?J=!0:"mousedown"==e?v=!0:"number"==typeof e&&(z=e);k=q(b.href),d[k]={body:a.body,title:a.title,scrollY:pageYOffset};for(e=a.head.children,f,c=e.length-1;0<=c;c--)f=e[c],f.hasAttribute("data-instant-track")&&(f=f.getAttribute("href")||f.getAttribute("src")||f.innerHTML,x.push(f));g=new XMLHttpRequest,g.addEventListener("readystatechange",L),F(!0),r.init(),l("change",!0),addEventListener("popstate",function(){var a=q(b.href);a!=k&&(a in d?(d[k].scrollY=pageYOffset,k=a,B(d[a].title,d[a].body,!1,d[a].scrollY)):b.href=b.href)})}else l("change",!0)},on:function(a,b){s[a].push(b)}}}(document,location)