var InstantClick=function(a,c){var y=navigator.userAgent,U=y.indexOf(' CriOS/')>-1,C='createTouch'in a,g,E,h,B,b={},f,k=!1,o=!1,s=!1,l=!1,A=!1,e={},n=!1,d=!1,v=[],F,r,z,w={fetch:[],receive:[],wait:[],change:[]},u,D;function q(a){var b=a.indexOf('#');return b<0?a:a.substr(0,b)}function x(a){while(a&&a.nodeName!='A')a=a.parentNode;return a}function X(a){do{if(!a.hasAttribute)break;if(a.hasAttribute('data-instant'))return!1;if(a.hasAttribute('data-no-instant'))return!0}while(a=a.parentNode)return!1}function W(a){do{if(!a.hasAttribute)break;if(a.hasAttribute('data-no-instant'))return!1;if(a.hasAttribute('data-instant'))return!0}while(a=a.parentNode)return!1}function t(a){var b=c.protocol+'//'+c.host;return!(a.target||a.hasAttribute('download')||a.href.indexOf(b+'/')!=0||a.href.indexOf('#')>-1&&q(a.href)==g||(F?!W(a):X(a)))}function m(c,f,d,e){for(var g=!1,b=0,a;b<w[c].length;b++)c=='receive'?(a=w[c][b](f,d,e),a&&('body'in a&&(d=a.body),'title'in a&&(e=a.title),g=a)):w[c][b](f,d,e);return g}function G(h,j,k,c,i){var f,b,d,e;if(a.documentElement.replaceChild(j,a.body),Z(k),c){if(history.pushState(null,null,c),f=c.indexOf('#'),b=f>-1&&a.getElementById(c.substr(f+1)),d=0,b)while(b.offsetParent)d+=b.offsetTop,b=b.offsetParent;scrollTo(0,d),g=q(c)}else scrollTo(0,i);U&&a.title==h?a.title=h+String.fromCharCode(160):a.title=h,J(),u.done(),m('change',!1),e=a.createEvent('HTMLEvents'),e.initEvent('instantclick:newpage',!0,!0),dispatchEvent(e)}function H(){n=!1,d=!1}function V(a){return a.replace(/<noscript[\s\S]+<\/noscript>/gi,'')}const T=/stylesheet/;function K(a,b){for(const c of a.children){let d;switch(c.tagName){case'LINK':const a=c.getAttribute('rel')||'';a&&!T.test(a)&&(d=a);break;case'META':const b=c.getAttribute('name')||'',e=c.getAttribute('property')||'';(b||e)&&(d=`${b}-${e}`);break}d&&b(c,`${c.tagName}-${d}`)}}function L(b){const a={};return K(b,(b,c)=>{a[c]=b.outerHTML}),a}function Z(b){K(a.head,(c,d)=>{const a=b[d];a&&(c.outerHTML=a)})}function N(b){if(B>+new Date-500)return;var a=x(b.target);if(!a||!t(a))return;p(a.href)}function M(b){if(B>+new Date-500)return;var a=x(b.target);if(!a||!t(a))return;a.addEventListener('mouseout',R),z?(E=a.href,h=setTimeout(p,z)):p(a.href)}function P(b){B=+new Date;var a=x(b.target);if(!a||!t(a))return;r?a.removeEventListener('mousedown',N):a.removeEventListener('mouseover',M),p(a.href)}function Q(a){var b=x(a.target);if(!b||!t(b))return;if(a.which>1||a.metaKey||a.ctrlKey)return;a.preventDefault(),I(b.href)}function R(){if(h){clearTimeout(h),h=!1;return}if(!n||d)return;f.abort(),H()}function S(){var c,g,i,p,r,h,t,j,n;if(f.readyState<4)return;if(f.status==0)return;if(e.ready=+new Date-e.start,f.getResponseHeader('Content-Type').match(/\/(x|ht|xht)ml/)){c=a.implementation.createHTMLDocument(''),c.documentElement.innerHTML=V(f.responseText),o=c.title,l=c.body,A=L(c.head),g=m('receive',k,l,o),g&&('body'in g&&(l=g.body),'title'in g&&(o=g.title)),i=q(k),b[i]={body:l,title:o,head:A,scrollY:i in b?b[i].scrollY:0},p=c.head.children,r=0;for(j=p.length-1;j>=0;j--)if(h=p[j],h.hasAttribute('data-instant-track')){t=h.getAttribute('href')||h.getAttribute('src')||h.innerHTML;for(n=v.length-1;n>=0;n--)v[n]==t&&r++}r!=v.length&&(s=!0)}else s=!0;d&&(d=!1,I(k))}function J(g){if(a.body.addEventListener('touchstart',P,!0),r?a.body.addEventListener('mousedown',N,!0):a.body.addEventListener('mouseover',M,!0),a.body.addEventListener('click',Q,!0),!g){var e=a.body.getElementsByTagName('script'),b,c,d,f;for(i=0,j=e.length;i<j;i++){if(b=e[i],b.hasAttribute('data-no-instant'))continue;c=a.createElement('script'),b.src&&(c.src=b.src),b.innerHTML&&(c.innerHTML=b.innerHTML),d=b.parentNode,f=b.nextSibling,d.removeChild(b),d.insertBefore(c,f)}}}function p(a){if(!r&&'display'in e&&+new Date-(e.start+e.display)<100)return;if(h&&(clearTimeout(h),h=!1),a||(a=E),n&&(a==k||d))return;n=!0,d=!1,k=a,l=!1,s=!1,e={start:+new Date},m('fetch'),f.open('GET',a),f.send()}function I(a){if('display'in e||(e.display=+new Date-e.start),h||!n){if(h&&k&&k!=a){c.href=a;return}p(a),u.start(0,!0),m('wait'),d=!0;return}if(d){c.href=a;return}if(s){c.href=k;return}if(!l){u.start(0,!0),m('wait'),d=!0;return}b[g].scrollY=pageYOffset,H(),G(o,l,A,k)}u=function(){var b,c,e,d,f;function m(){var g,d,f,i;if(b=a.createElement('div'),b.id='instantclick',c=a.createElement('div'),c.id='instantclick-bar',c.className='instantclick-bar',b.appendChild(c),g=['Webkit','Moz','O'],e='transform',!(e in c.style))for(d=0;d<3;d++)g[d]+'Transform'in c.style&&(e=g[d]+'Transform');if(f='transition',!(f in c.style))for(d=0;d<3;d++)g[d]+'Transition'in c.style&&(f='-'+g[d].toLowerCase()+'-'+f);i=a.createElement('style'),i.innerHTML='#instantclick{position:'+(C?'absolute':'fixed')+';top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;'+f+':opacity .25s .1s}'+'.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;'+f+':all .25s}',a.head.appendChild(i),C&&(h(),addEventListener('resize',h),addEventListener('scroll',h))}function i(c,e){d=c,a.getElementById(b.id)&&a.body.removeChild(b),b.style.opacity='1',a.getElementById(b.id)&&a.body.removeChild(b),g(),e&&setTimeout(l,0),clearTimeout(f),f=setTimeout(j,500)}function l(){d=10,g()}function j(){d+=1+Math.random()*2,d>=98?d=98:f=setTimeout(j,500),g()}function g(){c.style[e]='translate('+d+'%)',a.getElementById(b.id)||a.body.appendChild(b)}function k(){if(a.getElementById(b.id)){clearTimeout(f),d=100,g(),b.style.opacity='0';return}i(d==100?0:d),setTimeout(k,0)}function h(){b.style.left=pageXOffset+'px',b.style.width=innerWidth+'px',b.style.top=pageYOffset+'px';var a='orientation'in window&&Math.abs(orientation)==90,c=innerWidth/screen[a?'height':'width']*2;b.style[e]='scaleY('+c+')'}return{init:m,start:i,done:k}}(),D='pushState'in history&&(!y.match('Android')||y.match('Chrome/'))&&c.protocol!="file:";function Y(){var d,h,i,e,j;if(g)return;if(!D){m('change',!0);return}for(d=arguments.length-1;d>=0;d--)h=arguments[d],h===!0?F=!0:h=='mousedown'?r=!0:typeof h=='number'&&(z=h);g=q(c.href),b[g]={body:a.body,title:a.title,head:L(a.head),scrollY:pageYOffset},i=a.head.children;for(d=i.length-1;d>=0;d--)e=i[d],e.hasAttribute('data-instant-track')&&(j=e.getAttribute('href')||e.getAttribute('src')||e.innerHTML,v.push(j));f=new XMLHttpRequest,f.addEventListener('readystatechange',S),J(!0),u.init(),m('change',!0),addEventListener('popstate',function(){var a=q(c.href);if(a==g)return;if(!(a in b)){c.href=c.href;return}b[g].scrollY=pageYOffset,g=a,G(b[a].title,b[a].body,b[a].head,!1,b[a].scrollY)})}function O(a,b){w[a].push(b)}return{supported:D,init:Y,on:O}}(document,location)