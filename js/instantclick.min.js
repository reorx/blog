var InstantClick=function(e,t){var a,r,c,p,O,C,k,A,M,F,x=navigator.userAgent,G=x.indexOf(" CriOS/")>-1,N="createTouch"in e,n={},o=!1,m=!1,b=!1,d=!1,E=!1,l={},f=!1,s=!1,_=[],v={fetch:[],receive:[],wait:[],change:[]};function g(e){var t=e.indexOf("#");return t<0?e:e.substr(0,t)}function y(e){for(;e&&e.nodeName!="A";)e=e.parentNode;return e}function Q(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-instant"))return!1;if(e.hasAttribute("data-no-instant"))return!0}while(e=e.parentNode)return!1}function Y(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-no-instant"))return!1;if(e.hasAttribute("data-instant"))return!0}while(e=e.parentNode)return!1}function w(e){var n=t.protocol+"//"+t.host;return!(e.target||e.hasAttribute("download")||e.href.indexOf(n+"/")!=0||e.href.indexOf("#")>-1&&g(e.href)==a||(M?!Y(e):Q(e)))}function u(e,t,n,s){for(var o,a=!1,i=0;i<v[e].length;i++)e=="receive"?(o=v[e][i](t,n,s),o&&("body"in o&&(n=o.body),"title"in o&&(s=o.title),a=o)):v[e][i](t,n,s);return a}function T(t,n,s,o,i){if(e.documentElement.replaceChild(n,e.body),U(s),o){history.pushState(null,null,o);var c,l=o.indexOf("#"),r=l>-1&&e.getElementById(o.substr(l+1)),d=0;if(r)for(;r.offsetParent;)d+=r.offsetTop,r=r.offsetParent;scrollTo(0,d),a=g(o)}else scrollTo(0,i);G&&e.title==t?e.title=t+String.fromCharCode(160):e.title=t,P(),p.done(),u("change",!1),c=e.createEvent("HTMLEvents"),c.initEvent("instantclick:newpage",!0,!0),dispatchEvent(c)}function z(){f=!1,s=!1}function q(e){return e.replace(/<noscript[\s\S]+<\/noscript>/gi,"")}const K=/stylesheet/;function L(e,t){for(const n of e.children){let s;switch(n.tagName){case"LINK":const e=n.getAttribute("rel")||"";e&&!K.test(e)&&(s=e);break;case"META":const t=n.getAttribute("name")||"",o=n.getAttribute("property")||"";(t||o)&&(s=`${t}-${o}`);break}s&&t(n,`${n.tagName}-${s}`)}}function R(e){const t={};return L(e,(e,n)=>{t[n]=e.outerHTML}),t}function U(t){L(e.head,(e,n)=>{const s=t[n];s&&(e.outerHTML=s)})}function H(e){if(A>+new Date-500)return;var t=y(e.target);if(!t||!w(t))return;h(t.href)}function S(e){if(A>+new Date-500)return;var t=y(e.target);if(!t||!w(t))return;t.addEventListener("mouseout",$),C?(F=t.href,c=setTimeout(h,C)):h(t.href)}function B(e){A=+new Date;var t=y(e.target);if(!t||!w(t))return;O?t.removeEventListener("mousedown",H):t.removeEventListener("mouseover",S),h(t.href)}function V(e){var t=y(e.target);if(!t||!w(t))return;if(e.which>1||e.metaKey||e.ctrlKey)return;e.preventDefault(),D(t.href)}function $(){if(c){clearTimeout(c),c=!1;return}if(!f||s)return;r.abort(),z()}function W(){if(r.readyState<4)return;if(r.status==0)return;if(l.ready=+new Date-l.start,r.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){t=e.implementation.createHTMLDocument(""),t.documentElement.innerHTML=q(r.responseText),m=t.title,d=t.body,E=R(t.head),i=u("receive",o,d,m),i&&("body"in i&&(d=i.body),"title"in i&&(m=i.title)),c=g(o),n[c]={body:d,title:m,head:E,scrollY:c in n?n[c].scrollY:0};for(var t,i,a,c,h,j,p=t.head.children,v=0,f=p.length-1;f>=0;f--)if(a=p[f],a.hasAttribute("data-instant-track")){j=a.getAttribute("href")||a.getAttribute("src")||a.innerHTML;for(h=_.length-1;h>=0;h--)_[h]==j&&v++}v!=_.length&&(b=!0)}else b=!0;s&&(s=!1,D(o))}function P(t){if(e.body.addEventListener("touchstart",B,!0),O?e.body.addEventListener("mousedown",H,!0):e.body.addEventListener("mouseover",S,!0),e.body.addEventListener("click",V,!0),!t){var n,s,o,r,a=e.body.getElementsByTagName("script");for(i=0,j=a.length;i<j;i++){if(n=a[i],n.hasAttribute("data-no-instant"))continue;s=e.createElement("script"),n.src&&(s.src=n.src),n.innerHTML&&(s.innerHTML=n.innerHTML),o=n.parentNode,r=n.nextSibling,o.removeChild(n),o.insertBefore(s,r)}}}function h(e){if(!O&&"display"in l&&+new Date-(l.start+l.display)<100)return;if(c&&(clearTimeout(c),c=!1),e||(e=F),f&&(e==o||s))return;f=!0,s=!1,o=e,d=!1,b=!1,l={start:+new Date},u("fetch"),r.open("GET",e),r.send()}function D(e){if("display"in l||(l.display=+new Date-l.start),c||!f){if(c&&o&&o!=e){t.href=e;return}h(e),p.start(0,!0),u("wait"),s=!0;return}if(s){t.href=e;return}if(b){t.href=o;return}if(!d){p.start(0,!0),u("wait"),s=!0;return}n[a].scrollY=pageYOffset,z(),T(m,d,E,o)}p=function(){var t,n,s,o,i;function h(){t=e.createElement("div"),t.id="instantclick",n=e.createElement("div"),n.id="instantclick-bar",n.className="instantclick-bar",t.appendChild(n);var s,i,c,a=["Webkit","Moz","O"];if(o="transform",!(o in n.style))for(s=0;s<3;s++)a[s]+"Transform"in n.style&&(o=a[s]+"Transform");if(i="transition",!(i in n.style))for(s=0;s<3;s++)a[s]+"Transition"in n.style&&(i="-"+a[s].toLowerCase()+"-"+i);c=e.createElement("style"),c.innerHTML="#instantclick{position:"+(N?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+i+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+i+":all .25s}",e.head.appendChild(c),N&&(r(),addEventListener("resize",r),addEventListener("scroll",r))}function c(n,o){s=n,e.getElementById(t.id)&&e.body.removeChild(t),t.style.opacity="1",e.getElementById(t.id)&&e.body.removeChild(t),a(),o&&setTimeout(u,0),clearTimeout(i),i=setTimeout(l,500)}function u(){s=10,a()}function l(){s+=1+Math.random()*2,s>=98?s=98:i=setTimeout(l,500),a()}function a(){n.style[o]="translate("+s+"%)",e.getElementById(t.id)||e.body.appendChild(t)}function d(){if(e.getElementById(t.id)){clearTimeout(i),s=100,a(),t.style.opacity="0";return}c(s==100?0:s),setTimeout(d,0)}function r(){t.style.left=pageXOffset+"px",t.style.width=innerWidth+"px",t.style.top=pageYOffset+"px";var e="orientation"in window&&Math.abs(orientation)==90,n=innerWidth/screen[e?"height":"width"]*2;t.style[o]="scaleY("+n+")"}return{init:h,start:c,done:d}}(),k="pushState"in history&&(!x.match("Android")||x.match("Chrome/"))&&t.protocol!="file:";function X(){if(a)return;if(!k){u("change",!0);return}for(var o,i,c,l,s=arguments.length-1;s>=0;s--)o=arguments[s],o===!0?M=!0:o=="mousedown"?O=!0:typeof o=="number"&&(C=o);a=g(t.href),n[a]={body:e.body,title:e.title,head:R(e.head),scrollY:pageYOffset},c=e.head.children;for(s=c.length-1;s>=0;s--)i=c[s],i.hasAttribute("data-instant-track")&&(l=i.getAttribute("href")||i.getAttribute("src")||i.innerHTML,_.push(l));r=new XMLHttpRequest,r.addEventListener("readystatechange",W),P(!0),p.init(),u("change",!0),addEventListener("popstate",function(){var e=g(t.href);if(e==a)return;if(!(e in n)){t.href=t.href;return}n[a].scrollY=pageYOffset,a=e,T(n[e].title,n[e].body,n[e].head,!1,n[e].scrollY)})}function I(e,t){v[e].push(t)}return{supported:k,init:X,on:I}}(document,location)